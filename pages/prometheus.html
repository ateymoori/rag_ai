Prometheus — SBAB Docs  documentation SBAB Docs Ansible Controller Ansible Roles Ansible Vault Argo Workflows Authentication & Authorization Bitbucket Boost Chatbot Booli Ceph Dex Fortigate troubleshooting Generate certificate Go GitHub Copilot GitLab @Sbab User Guide GitLab Maintenance Grafana Istio Java Jenkins Jenkinsfile Jmeter Kafka Maintenance Kafka @Sbab User Guide Kafka Connect Kubectl Access Kubernetes Lab environment Local Open Web Metrics infrastructure MongoDB Netbox NVIDIA Neo4J Sonatype Nexus repository Oracle OWASP Database OWASP @Sbab User Guide Pact Principles of Security Prometheus URLâs Prometheus Thanos Deployment TNT/prometheus (Deprecated) TNT/promstack Version update ReactJS Redis Renovate S3 Security Guidelines for Developers Sentry Maintenance Sentry User Guide Configuring Variables for Services Deployed to Kubernetes Software Architecture SonarQube Maintenance SonarQube User Guide Structurizr System Landscape Vagrant Zipkin Windows Pipelines SBAB Docs » Prometheus View page source Prometheus ï Prometheus is a systems monitoring and alerting toolkit,
storing all the metrics we can see in Grafana . We are using Thanos to setup our prometheus service for each
of our environments. Note Currently all Prometheus instances are running in the oscommon Kubernetes cluster. This includes instances for all environments. URLâs ï Prometheus ï Environment Link Sys https://prometheus.sys.sbab.se/graph Acc https://prometheus.acc.sbab.se/graph Stage https://prometheus.stage.sbab.se/graph Production https://prometheus.prod.sbab.se/graph Thanos ï Environment Link Sys https://thanos-query.sys.sbab.se/graph Acc https://thanos-query.acc.sbab.se/graph Stage https://thanos-query.stage.sbab.se/graph Production https://thanos-query.prod.sbab.se/graph Deployment ï TNT/prometheus (Deprecated) ï Our old TNT/prometheus repository is now deprecated and replaced
by TNT/promstack as seen in the next section. The only reason that we are keeping this repository (for now) is that all our current scraping configurations are still
in this repository. And we do a checkout of this repo when we deploy through the new repository.
We are planning to change this in the near future, so please check this documentation before adding any more new
scraping configurations to Prometheus. TNT/promstack ï In our TNT/promstack repository we have the deployment configuration
files for Prometheus. This is the repository that should be used for Prometheus deployments now. The method of deployment is using Helm charts which is a tool for helping us managing Kubernetes
applications. Deployments of Prometheus for our separate environments are done with continuous delivery through Jenkins.
Build jobs for Prometheus can be seen here: https://jenkins.common.sbab.se:8443/job/TNT/job/promstack/ Version update ï Doing a version update of Prometheus and Thanos is very simple. Check for the latest version tags for the two projects on Github Prometheus: latest release Thanos: latest release On the release pages, make sure to check for any breaking changes or special warnings on any of the releases between your current version and the latest release version Checkout the TNT/promstack repository on you local machine, and make a working branch based on the existing dev branch Open the repository file k8s/values.yaml where you change the values of prometheus_version and thanos_version to the latest versions Create a Pull-request for your working branch to dev ThatÂ´s how simple an update to the latest Prometheus versions is now. Note When Prometheus is deployed to any environment, there will be a time delay of around 5-10 minutes before any
pre-existing storage data is properly loaded and available in Grafana Previous Next © Copyright 2024, TNT. Built with Sphinx using a theme provided by Read the Docs .