Jenkinsfile — SBAB Docs  documentation SBAB Docs Ansible Controller Ansible Roles Ansible Vault Argo Workflows Authentication & Authorization Bitbucket Boost Chatbot Booli Ceph Dex Fortigate troubleshooting Generate certificate Go GitHub Copilot GitLab @Sbab User Guide GitLab Maintenance Grafana Istio Java Jenkins Jenkinsfile SbabPipeline Type: Java services Type: Java libraries Type: Frontend services Type: Node services Type: JavaScript libraries Type: Oracle Type: Java standalone tests Versions Locations Slack channels Prometheus metrics Skip production deploy Ansible Roles Docker Images Windows Repo Deploy Related pages Jmeter Kafka Maintenance Kafka @Sbab User Guide Kafka Connect Kubectl Access Kubernetes Lab environment Local Open Web Metrics infrastructure MongoDB Netbox NVIDIA Neo4J Sonatype Nexus repository Oracle OWASP Database OWASP @Sbab User Guide Pact Principles of Security Prometheus ReactJS Redis Renovate S3 Security Guidelines for Developers Sentry Maintenance Sentry User Guide Configuring Variables for Services Deployed to Kubernetes Software Architecture SonarQube Maintenance SonarQube User Guide Structurizr System Landscape Vagrant Zipkin Windows Pipelines SBAB Docs » Jenkinsfile View page source Jenkinsfile ï The Jenkinsfile is a file that lives in the root of each repository. Adding this file to the repository creates
a Jenkins job. SbabPipeline ï The SbabPipeline supports different types, e.g Java and Node. In this example, the pipeline will build a Java 17
backend micro service: @Library ( 'tnt-shared-library' ) def pipe = new se . sbab . tnt . SbabPipeline () pipe . start ([ type: "corretto17" , location: "backend" , ]) Type: Java services ï Type Java version type: "corretto11" 11 type: "corretto17" 17 type: "corretto8" 8 type: "corretto11-batchjob" 11 type: "corretto17-batchjob" 17 type: "corretto8-batchjob" 8 Type: Java libraries ï Type Java version type: "corretto11-lib" 11 type: "corretto17-lib" 17 type: "corretto8-lib" 8 Type: Frontend services ï Type Framework type: "static" React Type: Node services ï Type Framework type: "node" Node Type: JavaScript libraries ï These libraries will only be pushed to Nexus. Type Description type: "js-lib" JavaScript libraries Type: Oracle ï These will execute SQL script against Oracle database. Type Description type: oracle" PL/SQL Type: Java standalone tests ï These will run Java integration tests as standalone tests. Type Java version type: "test-java11" 11 type: "test" 8 Versions ï With Java services, the version comes from the type configuration. Type Version Framework version type: "corretto17" Java version 17 Locations ï Location Description location: "backend" Backend services location: "frontend" Internal frontend services which are accessible through the Secure Web location: "frontend-external" Frontend services which are directly accessible from the outside world location: "tools" All tools used to build, test and monitor applications Slack channels ï Notifications in Slack channels can be configured in addition to the default #release channel. @Library ( 'tnt-shared-library' ) def pipe = new se . sbab . tnt . SbabPipeline () pipe . start ([ type: "corretto17" , location: "backend" , slack_channels: [ "team-tnt" , "tnt-private" , ], ]) Prometheus metrics ï If your application exports metrics for Prometheus/Grafana you need to specify what URL path should be scraped with service_scrape_path . @Library ( 'tnt-shared-library' ) def pipe = new se . sbab . tnt . SbabPipeline () pipe . start ([ type: "corretto17" , location: "backend" , service_scrape_path: "/partner-auth-service/admin/prometheusMetrics" , ]) Skip production deploy ï To skip production deploys when building the master branch, and only deploy to acc and stage, include skip_prod_deploy: "true", . @Library ( 'tnt-shared-library' ) def pipe = new se . sbab . tnt . SbabPipeline () pipe . start ([ type: "corretto17" , location: "backend" , skip_prod_deploy: "true" , ]) Ansible Roles ï This example runs Molecule in Jenkins for Ansible Roles . @Library ( 'tnt-shared-library' ) def pipe = new se . sbab . tnt . ansible . Roles () pipe . start () Docker Images ï This example builds and publishes a Docker image to Nexus. @Library ( 'tnt-shared-library' ) def pipe = new se . sbab . tnt . docker . BaseImage () pipe . build () Windows Repo Deploy ï #!/usr/bin/env groovy @Library ( 'tnt-shared-library' ) _ def pipe = new se . sbab . tnt . windows . RepoDeploy () pipe . start ([ targetDirectory: "D:\\Path\\To\\RepoDeployment" , targetHost: "my-windows-host" , ]) In the pipe.start method, there is a config map given. The config parameter targetDirectory points to the
directory which will be the root for the deployed repository contents.
The parameter targetHost must point to either an Ansible single host, or host group in the inventory corresponding
to the branch to be deployed. Related pages ï https://jenkins.io/doc/book/pipeline/shared-libraries/ https://github.com/jenkinsci/JenkinsPipelineUnit Previous Next © Copyright 2024, TNT. Built with Sphinx using a theme provided by Read the Docs .