ReactJS — SBAB Docs  documentation SBAB Docs Ansible Controller Ansible Roles Ansible Vault Argo Workflows Authentication & Authorization Bitbucket Boost Chatbot Booli Ceph Dex Fortigate troubleshooting Generate certificate Go GitHub Copilot GitLab @Sbab User Guide GitLab Maintenance Grafana Istio Java Jenkins Jenkinsfile Jmeter Kafka Maintenance Kafka @Sbab User Guide Kafka Connect Kubectl Access Kubernetes Lab environment Local Open Web Metrics infrastructure MongoDB Netbox NVIDIA Neo4J Sonatype Nexus repository Oracle OWASP Database OWASP @Sbab User Guide Pact Principles of Security Prometheus ReactJS Configurations Zipkin Pre-requisites Imports Testing locally Step-by-step guide Pre-requisites Initialize the project Run locally Deploy standalone app Deploy SiteVision app Redis Renovate S3 Security Guidelines for Developers Sentry Maintenance Sentry User Guide Configuring Variables for Services Deployed to Kubernetes Software Architecture SonarQube Maintenance SonarQube User Guide Structurizr System Landscape Vagrant Zipkin Windows Pipelines SBAB Docs » ReactJS View page source ReactJS ï Configurations ï Zipkin ï See react-app-template-3 for a complete example. Pre-requisites ï Libraries to add to package.json: opentracing zipkin zipkin-javascript-opentracing zipkin-transport-http Imports ï Code which will enable tracing for a component const ZipkinJavascriptOpentracing = require ( "zipkin-javascript-opentracing" ); const { BatchRecorder , jsonEncoder : { JSON_V2 } } = require ( 'zipkin' ); const { HttpLogger } = require ( "zipkin-transport-http" ); const tracer = new ZipkinJavascriptOpentracing ({ serviceName : "{serviceName}" , recorder : new BatchRecorder ({ logger : new HttpLogger ({ endpoint : "/api/trace" , serviceName : "{serviceName}" , jsonEncoder : JSON_V2 }) }), kind : "client" }); Note {serviceName} should be changed to the actual service name. Testing locally ï Clone kafka-zipkin Start kafka-zipkin locally (Which will send trace information to Zipkin in Sys) Change endpoint : http://localhost:8081/kafka-zipkin/spans Test the application and see if you see the tracing information in Zipkin . Step-by-step guide ï A step-by-step guide on how to go from initializing a ReactJS application, all the way to deploying the application
in e.g. PÃrtalen or Sitevision (Webben), but also as a standalone app. In this example, our new application will be called hello-world . Pre-requisites ï Node.js Initialize the project ï Clone react-app-template-3 : git clone -- depth 1 https : // stash . sbab . se / scm / tnt / react - app - template - 3 hello - world Step into the directory: cd hello - world Exclude the Git history from react-app-template-3 : rm - rf . git Change the homepage in package.json to: "homepage" : "/static/hello-world" , Run locally ï Install dependencies: npm install -- check - files Start the app and browse it from browse to http://localhost:3000 : npm run start Deploy standalone app ï If the app should be directly accessible from the outside world and not through the logged in Secure Web. One
example is the jattekul-episodes which does not require
one to be logged in. Set Locations in the Jenkinsfile to the following and wait the for the Jenkins job to deploy: location : "frontend-external" Add the following proxy in nginx_conf/ext/nginx.conf in the Swarm-FE section: location / hello - world / { proxy_pass http : // swarmfe / hello - world / ; } Wait for the Nginx Jenkins job to deploy the proxy changes. Browse the app on, e.g: Sys: https://sys.sbab.se/static/hello-world/ Acc: https://acc.sbab.se/static/hello-world/ Stage: https://preprod.sbab.se/static/hello-world/ Prod: https://www.sbab.se/static/hello-world/ Deploy SiteVision app ï If the app should be accessible through SiteVision inside the logged in Secure Web: Set Locations in the Jenkinsfile to the following and wait the for the Jenkins job to deploy: location : "frontend" Add the following proxy in secure.sbab.se.conf.j2 in the Swarm frontend apps section: RewriteRule ^/static/hello-world/(.*) http://{{ hostname_lb_intern }}:8880/hello-world/$1 [P] Deploy the secure.sbab.se.conf.j2 changes with the web-proxy-deploy Jenkins job . Create a HTML module in SiteVision with the following content: < div id = "element-to-render-your-react-application-in" ></ div > < script src = "/static/hello-world/base.js" ></ script > Previous Next © Copyright 2024, TNT. Built with Sphinx using a theme provided by Read the Docs .