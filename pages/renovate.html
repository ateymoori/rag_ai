Renovate — SBAB Docs  documentation SBAB Docs Ansible Controller Ansible Roles Ansible Vault Argo Workflows Authentication & Authorization Bitbucket Boost Chatbot Booli Ceph Dex Fortigate troubleshooting Generate certificate Go GitHub Copilot GitLab @Sbab User Guide GitLab Maintenance Grafana Istio Java Jenkins Jenkinsfile Jmeter Kafka Maintenance Kafka @Sbab User Guide Kafka Connect Kubectl Access Kubernetes Lab environment Local Open Web Metrics infrastructure MongoDB Netbox NVIDIA Neo4J Sonatype Nexus repository Oracle OWASP Database OWASP @Sbab User Guide Pact Principles of Security Prometheus ReactJS Redis Renovate URLâs Setup renovate for your repository Gitlab: Stash/Bitbucket: Caveats S3 Security Guidelines for Developers Sentry Maintenance Sentry User Guide Configuring Variables for Services Deployed to Kubernetes Software Architecture SonarQube Maintenance SonarQube User Guide Structurizr System Landscape Vagrant Zipkin Windows Pipelines SBAB Docs » Renovate View page source Renovate ï Renovate automates dependency updates. We are using the self hosted version. URLâs ï Base Image . This needs to be updated manually if we want a newer version. Jenkins runner Gitlab runner Setup renovate for your repository ï We have a renovate-runner for both stash and gitlab. They slightly differ in configuration that we will cover here. You need to add your repository here https://gitlab.sbab.se/devex/renovate-runner/-/blob/master/repos.txt or here
https://stash.sbab.se/projects/PLAT/repos/renovate-runner/browse/repos.txt The renovate-runner will create a separate job for each team. This job runs every night. You also need to add renovate.json in your repository.
You can change âcommitMessagePrefixâ to be on of your teams placeholder JIRA-issue. **For automerge to work
you also need to give the renovate user a maintainer role in your group. In the push rules setting for the group/project you need to make sure that both âReject unverified userâ and âCheck whether the commit author is a GitLab userâ are unchecked. ** Gitlab: ï { "npmrc" : "registry=http://nexus.common.sbab.se:8081/repository/npm-public/" , "maven" : { "enabled" : true }, "platformAutomerge" : true , "hostRules" : [ { "hostType" : "maven" , "baseUrl" : "http://nexus.common.sbab.se:8081/repository/maven-public/" } ], "packageRules" : [ { "matchUpdateTypes" : [ "minor" , "patch" , "pin" , "digest" ], "automerge" : true , "gitLabIgnoreApprovals" : true }, { "registryUrls" : [ "http://nexus.common.sbab.se:8081/repository/maven-public/" ], "matchManagers" : [ "maven" ] } ], "rangeStrategy" : "bump" , "commitMessagePrefix" : "DEVX-729" , "$schema" : "https://docs.renovatebot.com/renovate-schema.json" } Stash/Bitbucket: ï { "npmrc" : "registry=http://nexus.common.sbab.se:8081/repository/npm-public/" , "maven" : { "enabled" : true }, "hostRules" : [ { "hostType" : "maven" , "baseUrl" : "http://nexus.common.sbab.se:8081/repository/maven-public/" } ], "packageRules" : [ { "managers" : [ "maven" ], "registryUrls" : [ "http://nexus.common.sbab.se:8081/repository/maven-public/" ] } ], "rangeStrategy" : "bump" , "$schema" : "https://docs.renovatebot.com/renovate-schema.json" } You can of course run the jobs here to test your configuration. Caveats ï Automerge does not work in Stash/Bitbucket. Previous Next © Copyright 2024, TNT. Built with Sphinx using a theme provided by Read the Docs .